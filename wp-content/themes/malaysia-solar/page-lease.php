<?php
/**
 * Template Name: Lease to Own
 * Zero Capex solar financing with eKYC
 *
 * @package Malaysia_Solar
 */

get_header();
?>

<!-- Page Header -->
<section class="page-header" style="background: linear-gradient(135deg, var(--eco-teal) 0%, #00897B 100%);">
    <div class="container">
        <div class="breadcrumb">
            <a href="<?php echo esc_url(home_url('/')); ?>" style="color: rgba(255,255,255,0.7);">Home</a>
            <span style="color: rgba(255,255,255,0.5);">/</span>
            <span>Lease-to-Own</span>
        </div>
        <h1 style="color: var(--pure-white);">Zero Upfront Solar</h1>
        <p style="color: rgba(255,255,255,0.8); font-size: 1.25rem; margin-top: var(--space-md);">
            Start saving on electricity with no initial investment required
        </p>
    </div>
</section>

<!-- How It Works -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <span class="section-label" style="background: var(--eco-teal); color: var(--pure-white);">Zero Capex</span>
            <h2 class="section-title">How Lease-to-Own Works</h2>
            <p class="section-description">
                Go solar without any upfront payment. Pay a fixed monthly amount from your savings and own the system at the end.
            </p>
        </div>

        <div class="grid grid-4 gap-xl">
            <div class="card" style="text-align: center; padding: var(--space-xl);">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(0,191,166,0.15) 0%, rgba(0,191,166,0.05) 100%); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-lg);">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--eco-teal)" stroke-width="2">
                        <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
                        <rect x="8" y="2" width="8" height="4" rx="1"/>
                        <path d="M9 12l2 2 4-4"/>
                    </svg>
                </div>
                <h4 style="margin-bottom: var(--space-sm);">1. Apply Online</h4>
                <p style="font-size: 0.9375rem; color: var(--medium-gray); margin-bottom: 0;">Complete our quick online application and eKYC verification</p>
            </div>

            <div class="card" style="text-align: center; padding: var(--space-xl);">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(0,191,166,0.15) 0%, rgba(0,191,166,0.05) 100%); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-lg);">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--eco-teal)" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                </div>
                <h4 style="margin-bottom: var(--space-sm);">2. Get Approved</h4>
                <p style="font-size: 0.9375rem; color: var(--medium-gray); margin-bottom: 0;">Receive financing approval within 24-48 hours</p>
            </div>

            <div class="card" style="text-align: center; padding: var(--space-xl);">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(0,191,166,0.15) 0%, rgba(0,191,166,0.05) 100%); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-lg);">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--eco-teal)" stroke-width="2">
                        <path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/>
                    </svg>
                </div>
                <h4 style="margin-bottom: var(--space-sm);">3. Free Installation</h4>
                <p style="font-size: 0.9375rem; color: var(--medium-gray); margin-bottom: 0;">We install your solar system at no cost to you</p>
            </div>

            <div class="card" style="text-align: center; padding: var(--space-xl);">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(0,191,166,0.15) 0%, rgba(0,191,166,0.05) 100%); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-lg);">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--eco-teal)" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83"/>
                    </svg>
                </div>
                <h4 style="margin-bottom: var(--space-sm);">4. Start Saving</h4>
                <p style="font-size: 0.9375rem; color: var(--medium-gray); margin-bottom: 0;">Enjoy lower bills immediately. Own the system after lease period.</p>
            </div>
        </div>
    </div>
</section>

<!-- Comparison -->
<section class="section" style="background: var(--soft-gray);">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Compare Your Options</h2>
        </div>

        <div class="grid grid-2 gap-xl">
            <!-- Lease Option -->
            <div class="card" style="border: 2px solid var(--eco-teal);">
                <div class="card-header" style="background: var(--eco-teal); color: var(--pure-white);">
                    <h3 style="margin: 0; color: var(--pure-white);">Lease-to-Own</h3>
                </div>
                <div class="card-body">
                    <div style="text-align: center; padding: var(--space-lg) 0; border-bottom: 1px solid rgba(10,22,40,0.1);">
                        <div style="font-family: var(--font-display); font-size: 3rem; font-weight: 700; color: var(--eco-teal);">RM 0</div>
                        <div style="color: var(--medium-gray);">Upfront Cost</div>
                    </div>
                    <ul style="list-style: none; padding: var(--space-lg) 0;">
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--eco-teal);">✓</span>
                            <span>Zero initial investment</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--eco-teal);">✓</span>
                            <span>Fixed monthly payments</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--eco-teal);">✓</span>
                            <span>Maintenance included</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--eco-teal);">✓</span>
                            <span>Own system after 10-15 years</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--eco-teal);">✓</span>
                            <span>Start saving from Day 1</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm);">
                            <span style="color: var(--eco-teal);">✓</span>
                            <span>Performance guarantee</span>
                        </li>
                    </ul>
                    <a href="#ekyc-section" class="btn btn-primary w-full" style="background: var(--eco-teal);">
                        Check Eligibility
                    </a>
                </div>
            </div>

            <!-- Buy Option -->
            <div class="card">
                <div class="card-header" style="background: var(--space-deep); color: var(--pure-white);">
                    <h3 style="margin: 0; color: var(--pure-white);">Buy System</h3>
                </div>
                <div class="card-body">
                    <div style="text-align: center; padding: var(--space-lg) 0; border-bottom: 1px solid rgba(10,22,40,0.1);">
                        <div style="font-family: var(--font-display); font-size: 3rem; font-weight: 700; color: var(--space-deep);">RM 15K+</div>
                        <div style="color: var(--medium-gray);">One-time Payment</div>
                    </div>
                    <ul style="list-style: none; padding: var(--space-lg) 0;">
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--solar-amber);">✓</span>
                            <span>Immediate ownership</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--solar-amber);">✓</span>
                            <span>Maximum long-term savings</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--solar-amber);">✓</span>
                            <span>No monthly payments</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--solar-amber);">✓</span>
                            <span>Bank financing available</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
                            <span style="color: var(--solar-amber);">✓</span>
                            <span>4-6 year payback period</span>
                        </li>
                        <li style="display: flex; gap: var(--space-sm);">
                            <span style="color: var(--solar-amber);">✓</span>
                            <span>25-year panel warranty</span>
                        </li>
                    </ul>
                    <a href="<?php echo esc_url(home_url('/get-a-quote/')); ?>" class="btn btn-secondary w-full">
                        Get Quote
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- eKYC Section -->
<section class="section" id="ekyc-section">
    <div class="container container-narrow">
        <div class="card" style="overflow: hidden;">
            <div class="card-header" style="background: linear-gradient(135deg, var(--eco-teal) 0%, #00897B 100%); padding: var(--space-xl);">
                <h3 style="color: var(--pure-white); margin-bottom: var(--space-sm);">Check Your Eligibility</h3>
                <p style="color: rgba(255,255,255,0.8); margin-bottom: 0;">Complete eKYC verification to see if you qualify for zero-upfront solar</p>
            </div>
            <div class="card-body" style="padding: var(--space-2xl);">
                <form id="ekyc-form">
                    <div class="grid grid-2 gap-lg">
                        <div class="form-group">
                            <label class="form-label required">Full Name (as per IC)</label>
                            <input type="text" class="form-input" name="full_name" required placeholder="e.g., Ahmad bin Abdullah">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">IC Number</label>
                            <input type="text" class="form-input" name="ic_number" required placeholder="e.g., 880101-01-1234">
                        </div>
                    </div>

                    <div class="grid grid-2 gap-lg">
                        <div class="form-group">
                            <label class="form-label required">Email Address</label>
                            <input type="email" class="form-input" name="email" required placeholder="e.g., ahmad@email.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Phone Number</label>
                            <input type="tel" class="form-input" name="phone" required placeholder="e.g., 012-345 6789">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Property Address</label>
                        <input type="text" class="form-input" name="address" required placeholder="Full address of the property">
                    </div>

                    <div class="grid grid-2 gap-lg">
                        <div class="form-group">
                            <label class="form-label required">Monthly Income (RM)</label>
                            <select class="form-select form-input" name="income" required>
                                <option value="">Select range</option>
                                <option value="3000-5000">RM 3,000 - RM 5,000</option>
                                <option value="5000-8000">RM 5,000 - RM 8,000</option>
                                <option value="8000-12000">RM 8,000 - RM 12,000</option>
                                <option value="12000+">RM 12,000+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Employment Type</label>
                            <select class="form-select form-input" name="employment" required>
                                <option value="">Select type</option>
                                <option value="employed">Employed (Private)</option>
                                <option value="government">Government Servant</option>
                                <option value="self-employed">Self-Employed</option>
                                <option value="business-owner">Business Owner</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Monthly TNB Bill (RM)</label>
                        <input type="number" class="form-input" name="tnb_bill" required placeholder="e.g., 500" min="200">
                        <span class="form-hint">Minimum RM 200 monthly bill required for lease program</span>
                    </div>

                    <div class="form-group">
                        <label class="form-checkbox">
                            <input type="checkbox" name="consent" required>
                            <span>I consent to the processing of my personal data for financing eligibility assessment and agree to the <a href="#" style="color: var(--eco-teal);">Terms & Conditions</a> and <a href="#" style="color: var(--eco-teal);">Privacy Policy</a>.</span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg w-full" style="background: var(--eco-teal);">
                        Check My Eligibility
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </form>

                <!-- Result Section (hidden by default) -->
                <div id="ekyc-result" style="display: none; margin-top: var(--space-xl);">
                    <div id="ekyc-qualified" style="display: none; text-align: center; padding: var(--space-xl); background: linear-gradient(135deg, rgba(46,204,113,0.1) 0%, rgba(0,191,166,0.1) 100%); border-radius: var(--radius-lg);">
                        <div style="width: 80px; height: 80px; background: var(--eco-green); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-lg);">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--pure-white)" stroke-width="3">
                                <polyline points="20,6 9,17 4,12"/>
                            </svg>
                        </div>
                        <h3 style="color: var(--eco-green); margin-bottom: var(--space-sm);">You're Pre-Qualified!</h3>
                        <p style="margin-bottom: var(--space-lg);">Great news! Based on your information, you appear to qualify for our Lease-to-Own program.</p>
                        <p style="font-size: 0.9375rem; color: var(--medium-gray); margin-bottom: var(--space-lg);">Our team will contact you within 24 hours to complete the application and schedule your free site visit.</p>
                        <a href="<?php echo esc_url(malaysia_solar_whatsapp_link('Hi! I just completed the Lease-to-Own eligibility check and I am pre-qualified. I would like to proceed with my application.')); ?>" class="btn btn-primary" style="background: var(--eco-teal);">
                            WhatsApp Us to Proceed
                        </a>
                    </div>

                    <div id="ekyc-not-qualified" style="display: none; text-align: center; padding: var(--space-xl); background: rgba(10,22,40,0.05); border-radius: var(--radius-lg);">
                        <div style="width: 80px; height: 80px; background: var(--medium-gray); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-lg);">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--pure-white)" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4M12 8h.01"/>
                            </svg>
                        </div>
                        <h3 style="margin-bottom: var(--space-sm);">Additional Review Needed</h3>
                        <p style="margin-bottom: var(--space-lg);">Based on the information provided, your application requires additional review by our team.</p>
                        <p style="font-size: 0.9375rem; color: var(--medium-gray); margin-bottom: var(--space-lg);">Don't worry - you may still qualify! Our team will contact you to discuss alternative options including our Buy System with flexible financing.</p>
                        <div style="display: flex; gap: var(--space-md); justify-content: center; flex-wrap: wrap;">
                            <a href="<?php echo esc_url(home_url('/get-a-quote/')); ?>" class="btn btn-secondary">
                                Explore Buy Options
                            </a>
                            <a href="<?php echo esc_url(malaysia_solar_whatsapp_link('Hi! I completed the Lease-to-Own eligibility check but need additional review. Can you help?')); ?>" class="btn btn-outline">
                                Contact Us
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ -->
<section class="section" style="background: var(--soft-gray);">
    <div class="container container-narrow">
        <div class="section-header">
            <h2 class="section-title">Frequently Asked Questions</h2>
        </div>

        <div style="display: flex; flex-direction: column; gap: var(--space-md);">
            <details class="card" style="padding: 0;">
                <summary style="padding: var(--space-lg); cursor: pointer; font-weight: 600; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                    What are the eligibility requirements?
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg>
                </summary>
                <div style="padding: 0 var(--space-lg) var(--space-lg); color: var(--space-blue);">
                    <p style="margin-bottom: 0;">To qualify for our Lease-to-Own program, you typically need: minimum monthly income of RM 3,000, minimum TNB bill of RM 200/month, Malaysian citizen or PR, property ownership or long-term lease, and good credit history. Final approval is subject to our financing partner's assessment.</p>
                </div>
            </details>

            <details class="card" style="padding: 0;">
                <summary style="padding: var(--space-lg); cursor: pointer; font-weight: 600; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                    How much will my monthly payment be?
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg>
                </summary>
                <div style="padding: 0 var(--space-lg) var(--space-lg); color: var(--space-blue);">
                    <p style="margin-bottom: 0;">Monthly payments are typically structured to be less than your current electricity savings. For example, if your solar system saves you RM 400/month, your lease payment might be around RM 300-350/month, so you start saving immediately. Exact amounts depend on system size and lease term.</p>
                </div>
            </details>

            <details class="card" style="padding: 0;">
                <summary style="padding: var(--space-lg); cursor: pointer; font-weight: 600; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                    What happens after the lease period?
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg>
                </summary>
                <div style="padding: 0 var(--space-lg) var(--space-lg); color: var(--space-blue);">
                    <p style="margin-bottom: 0;">At the end of the lease period (typically 10-15 years), ownership of the solar system transfers to you at no additional cost. You then enjoy completely free electricity from your panels for the remaining 10-15 years of their lifespan!</p>
                </div>
            </details>

            <details class="card" style="padding: 0;">
                <summary style="padding: var(--space-lg); cursor: pointer; font-weight: 600; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                    Is maintenance included?
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg>
                </summary>
                <div style="padding: 0 var(--space-lg) var(--space-lg); color: var(--space-blue);">
                    <p style="margin-bottom: 0;">Yes! Full maintenance is included throughout the lease period. This covers regular inspections, cleaning, inverter servicing, and any repairs needed. We also provide performance monitoring to ensure your system operates at peak efficiency.</p>
                </div>
            </details>

            <details class="card" style="padding: 0;">
                <summary style="padding: var(--space-lg); cursor: pointer; font-weight: 600; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                    Can I pay off the lease early?
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg>
                </summary>
                <div style="padding: 0 var(--space-lg) var(--space-lg); color: var(--space-blue);">
                    <p style="margin-bottom: 0;">Yes, early buyout options are available. After an initial lock-in period (usually 2-3 years), you can purchase the system outright at a predetermined price. This gives you flexibility if your financial situation changes.</p>
                </div>
            </details>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('ekyc-form');
    const resultSection = document.getElementById('ekyc-result');
    const qualifiedResult = document.getElementById('ekyc-qualified');
    const notQualifiedResult = document.getElementById('ekyc-not-qualified');

    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Simple eligibility check
            const income = form.querySelector('[name="income"]').value;
            const tnbBill = parseFloat(form.querySelector('[name="tnb_bill"]').value) || 0;
            const employment = form.querySelector('[name="employment"]').value;

            // Basic qualification criteria
            const incomeQualified = ['5000-8000', '8000-12000', '12000+'].includes(income) ||
                                   (income === '3000-5000' && ['government', 'employed'].includes(employment));
            const billQualified = tnbBill >= 200;

            const isQualified = incomeQualified && billQualified;

            // Show result
            resultSection.style.display = 'block';
            if (isQualified) {
                qualifiedResult.style.display = 'block';
                notQualifiedResult.style.display = 'none';
            } else {
                qualifiedResult.style.display = 'none';
                notQualifiedResult.style.display = 'block';
            }

            // Scroll to result
            resultSection.scrollIntoView({ behavior: 'smooth' });

            // Submit to CRM (would connect to backend)
            console.log('Form submitted:', Object.fromEntries(new FormData(form)));
        });
    }
});
</script>

<?php get_footer(); ?>
